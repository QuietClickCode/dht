<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script type="text/javascript" src="/js/jquery.min.js"></script>
</head>
<body>
<form method="post" id="uploadFile" enctype="multipart/form-data" action="/file/imageUpload">
    <div class="form-group">
        <label for="">File input</label>
        <input name="imageUse" type="text" value="image" id="">
    </div>
    <div class="form-group">
        <label for="exampleInputFile">File input</label>
        <input name="dht_image_upload" type="file" id="exampleInputFile">
    </div>
</form>


    <button type="button" class="btn btn-default" onclick="test()">Submit</button>

    <script type="text/javascript">
        /*let uploadFile = document.getElementById("uploadFile");
        uploadFile.addEventListener('submit',function (event) {
            let exampleInputFile = document.getElementById("exampleInputFile");
            alert(exampleInputFile.value)
            let oData = new FormData(uploadFile);
            oData.append("imageUse","image/jpeg");
            oData.append("isWatermark","false");
            oData.append("isCompress", "false");
            let req = new XMLHttpRequest();
            req.open("post","/file/imageUpload",true);
            req.onload = function () {
                if(req.status == 200)
                    alert(req.responseText);
                else
                    alert("Error");
            }
            req.send(oData);
            event.preventDefault();
        },false);*/

/*        let uploadFile = document.getElementById("uploadFile");*/


        function test() {
            alert(ajaxUploadFile('#uploadFile',0));
        }


        function ajaxUploadFile(fromId,num) {
            var fd = new FormData($(fromId)[num]);
            fd.append("imageUse","image/jpeg");
            fd.append("isWatermark","false");
            fd.append("isCompress", "false");
            $.ajax({
                url:"/file/imageUpload",
                type:"post",
                data: fd,
                processData : false,
                contentType : false,
                success:function (data) {
                    return JSON.parse(data).original;
                }
            });
        }
    </script>
</body>
</html>